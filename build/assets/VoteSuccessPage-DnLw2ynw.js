import{c as k,j as e,u as _,a as F,b as D,d as W,R as v,r as B,e as f,C as S,F as M,B as o,m as $,f as z,T as t,G as r,g as E,h as T,A as P,i as u,P as N,V as U,D as p,Z as L,k as q,l as H,E as V,I as x,W as O,n as Y,o as G,S as J,p as h,q as Z,H as Q,s as X}from"./index-BKMQiA3i.js";const K=k(e.jsx("path",{d:"m2 22 14-5-9-9zm12.53-9.47 5.59-5.59c.49-.49 1.28-.49 1.77 0l.59.59 1.06-1.06-.59-.59c-1.07-1.07-2.82-1.07-3.89 0l-5.59 5.59zm-4.47-5.65-.59.59 1.06 1.06.59-.59c1.07-1.07 1.07-2.82 0-3.89l-.59-.59-1.06 1.07.59.59c.48.48.48 1.28 0 1.76m7 5-1.59 1.59 1.06 1.06 1.59-1.59c.49-.49 1.28-.49 1.77 0l1.61 1.61 1.06-1.06-1.61-1.61c-1.08-1.07-2.82-1.07-3.89 0m-2-6-3.59 3.59 1.06 1.06 3.59-3.59c1.07-1.07 1.07-2.82 0-3.89l-1.59-1.59-1.06 1.06 1.59 1.59c.48.49.48 1.29 0 1.77"})),ee=k(e.jsx("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3m-3 11H8v-5h8zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-1-9H6v4h12z"})),ae=()=>{const d=_(),g=F(),w=D(),C=W(w.breakpoints.down("sm")),n=g.state?.paymentData||{},s=g.state?.candidat||{},[j,b]=v.useState(!1),[te,re]=v.useState(!1);B.useEffect(()=>{n?.id||d("/candidats"),n.email&&A()},[n,d]);const A=async()=>{try{await f.post("/payments/send-confirmation",{payment_id:n.id,email:n.email})}catch(a){console.error("Erreur envoi email:",a)}},l=a=>{const c=`Je viens de voter pour ${s.nom_complet} sur Talents d'Afrique! üéâ Rejoignez-moi pour soutenir les talents africains!`,i=window.location.origin;switch(a){case"whatsapp":window.open(`https://wa.me/?text=${encodeURIComponent(c+" "+i)}`,"_blank");break;case"facebook":window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(i)}`,"_blank");break;case"twitter":window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(c)}&url=${encodeURIComponent(i)}`,"_blank");break;default:navigator.share&&navigator.share({title:"J'ai vot√© sur Talents d'Afrique",text:c,url:i})}},R=()=>{window.print()},I=async()=>{try{b(!0);const a=await f.get(`/payments/receipt/${n.id}`,{responseType:"blob"}),c=window.URL.createObjectURL(new Blob([a.data])),i=document.createElement("a");i.href=c,i.setAttribute("download",`re√ßu-${n.reference}.pdf`),document.body.appendChild(i),i.click(),i.remove()}catch(a){console.error("Erreur t√©l√©chargement:",a)}finally{b(!1)}},y=a=>new Date(a).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),m=a=>a?.toLocaleString("fr-FR")+" XOF";return e.jsxs(S,{maxWidth:"lg",sx:{py:4},children:[e.jsx("style",{children:`
          @keyframes confettiRain {
            0% {
              transform: translateY(-100vh) rotate(0deg);
              opacity: 1;
            }
            100% {
              transform: translateY(100vh) rotate(360deg);
              opacity: 0;
            }
          }
          
          @keyframes float {
            0%, 100% {
              transform: translateY(0);
            }
            50% {
              transform: translateY(-10px);
            }
          }
          
          .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: var(--color);
            top: -10px;
            left: var(--left);
            animation: confettiRain var(--duration) linear infinite;
            z-index: 9999;
          }
          
          @media print {
            .no-print {
              display: none !important;
            }
          }
        `}),!C&&Array.from({length:50}).map((a,c)=>e.jsx("div",{className:"confetti",style:{"--color":`hsl(${Math.random()*360}, 100%, 50%)`,"--left":`${Math.random()*100}vw`,"--duration":`${Math.random()*3+2}s`,"--delay":`${Math.random()*2}s`}},c)),e.jsx(M,{in:!0,timeout:1e3,children:e.jsxs(o,{sx:{textAlign:"center",mb:6},children:[e.jsx($.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},children:e.jsx(z,{sx:{fontSize:100,color:"#4CAF50",mb:3,animation:"float 2s ease-in-out infinite"}})}),e.jsx(t,{variant:"h3",fontWeight:"bold",gutterBottom:!0,sx:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",mb:2},children:"F√©licitations !"}),e.jsx(t,{variant:"h5",color:"text.secondary",paragraph:!0,children:"Votre vote a √©t√© enregistr√© avec succ√®s"})]})}),e.jsxs(r,{container:!0,spacing:4,children:[e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(E,{in:!0,timeout:800,children:e.jsxs(T,{sx:{height:"100%",borderRadius:3,overflow:"hidden",boxShadow:"0 8px 40px rgba(102, 126, 234, 0.15)",position:"relative"},children:[e.jsx(o,{sx:{height:100,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",position:"relative"}}),e.jsxs(o,{sx:{p:3,position:"relative",mt:-8},children:[e.jsx(P,{src:s.photo,alt:s.nom_complet,sx:{width:120,height:120,mx:"auto",mb:2,border:"4px solid white",boxShadow:"0 4px 20px rgba(0,0,0,0.15)"}}),e.jsx(t,{variant:"h5",fontWeight:"bold",align:"center",gutterBottom:!0,children:s.nom_complet}),e.jsx(t,{variant:"body1",color:"text.secondary",align:"center",paragraph:!0,children:s.categorie_nom}),e.jsxs(o,{sx:{display:"flex",justifyContent:"center",gap:1,mb:3},children:[e.jsx(u,{icon:e.jsx(N,{}),label:s.sexe==="F"?"Candidate":"Candidat",size:"small",sx:{background:"rgba(102, 126, 234, 0.1)",color:"#667eea"}}),e.jsx(u,{icon:e.jsx(U,{}),label:`${n.votes_count||1} vote${n.votes_count>1?"s":""}`,size:"small",sx:{background:"rgba(76, 175, 80, 0.1)",color:"#4CAF50"}})]}),e.jsx(p,{sx:{my:2}}),e.jsxs(o,{sx:{textAlign:"center"},children:[e.jsx(K,{sx:{fontSize:40,color:"#FF9800",mb:1}}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"Merci pour votre soutien !"})]})]})]})})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(L,{in:!0,timeout:1200,children:e.jsxs(q,{elevation:0,sx:{p:4,borderRadius:3,border:"1px solid #e0e0e0",height:"100%",background:"#f8f9fa"},children:[e.jsx(t,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"D√©tails de la transaction"}),e.jsx(p,{sx:{my:2}}),e.jsxs(r,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",color:"text.secondary",children:"R√©f√©rence:"})}),e.jsx(r,{item:!0,xs:6,textAlign:"right",children:e.jsx(t,{variant:"body2",fontWeight:"medium",fontFamily:"monospace",children:n.reference})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",color:"text.secondary",children:"Date:"})}),e.jsx(r,{item:!0,xs:6,textAlign:"right",children:e.jsx(t,{variant:"body2",children:y(n.created_at||new Date)})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",color:"text.secondary",children:"Montant total:"})}),e.jsx(r,{item:!0,xs:6,textAlign:"right",children:e.jsx(t,{variant:"h6",fontWeight:"bold",color:"#667eea",children:m(n.amount)})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",color:"text.secondary",children:"M√©thode:"})}),e.jsx(r,{item:!0,xs:6,textAlign:"right",children:e.jsx(t,{variant:"body2",children:n.payment_method==="mobile_money"?"Mobile Money":n.payment_method==="card"?"Carte Bancaire":"Virement Bancaire"})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",color:"text.secondary",children:"Statut:"})}),e.jsx(r,{item:!0,xs:6,textAlign:"right",children:e.jsx(u,{label:"Pay√©",size:"small",sx:{background:"#4CAF50",color:"white",fontWeight:"bold"}})})]}),e.jsxs(H,{severity:"success",icon:e.jsx(V,{}),sx:{borderRadius:2,mb:3},children:["Un re√ßu d√©taill√© a √©t√© envoy√© √† ",n.email]}),e.jsxs(o,{sx:{mt:4},children:[e.jsx(t,{variant:"body2",color:"text.secondary",align:"center",sx:{mb:2},children:"Partager cette r√©ussite"}),e.jsxs(o,{sx:{display:"flex",justifyContent:"center",gap:1},children:[e.jsx(x,{onClick:()=>l("whatsapp"),sx:{background:"#25D366",color:"white","&:hover":{background:"#128C7E"}},children:e.jsx(O,{})}),e.jsx(x,{onClick:()=>l("facebook"),sx:{background:"#1877F2",color:"white","&:hover":{background:"#166FE5"}},children:e.jsx(Y,{})}),e.jsx(x,{onClick:()=>l("twitter"),sx:{background:"#1DA1F2",color:"white","&:hover":{background:"#1A91DA"}},children:e.jsx(G,{})}),e.jsx(x,{onClick:()=>l(),sx:{background:"#667eea",color:"white","&:hover":{background:"#5a6fd8"}},children:e.jsx(J,{})})]})]})]})})})]}),e.jsxs(o,{sx:{mt:6,display:"flex",flexWrap:"wrap",gap:2,justifyContent:"center"},children:[e.jsx(h,{variant:"outlined",startIcon:e.jsx(Z,{}),onClick:()=>d("/candidats"),className:"no-print",sx:{px:4,py:1.5,borderRadius:2,borderColor:"#667eea",color:"#667eea","&:hover":{borderColor:"#5a6fd8",background:"rgba(102, 126, 234, 0.04)"}},children:"Retour aux candidats"}),e.jsx(h,{variant:"outlined",startIcon:e.jsx(Q,{}),onClick:()=>d("/"),className:"no-print",sx:{px:4,py:1.5,borderRadius:2,borderColor:"#764ba2",color:"#764ba2","&:hover":{borderColor:"#6a4190",background:"rgba(118, 75, 162, 0.04)"}},children:"Accueil"}),e.jsx(h,{variant:"contained",startIcon:e.jsx(X,{}),onClick:I,disabled:j,className:"no-print",sx:{px:4,py:1.5,borderRadius:2,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)","&:hover":{background:"linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%)"}},children:j?"T√©l√©chargement...":"T√©l√©charger le re√ßu"}),e.jsx(h,{variant:"contained",startIcon:e.jsx(ee,{}),onClick:R,className:"no-print",sx:{px:4,py:1.5,borderRadius:2,background:"#4CAF50","&:hover":{background:"#45a049"}},children:"Imprimer le re√ßu"})]}),e.jsx(o,{sx:{display:"none"},children:e.jsx("div",{id:"receipt-print",children:e.jsxs(o,{sx:{p:4,maxWidth:800,margin:"0 auto"},children:[e.jsx(t,{variant:"h4",fontWeight:"bold",gutterBottom:!0,align:"center",children:"Re√ßu de paiement"}),e.jsxs(t,{variant:"h6",align:"center",color:"text.secondary",gutterBottom:!0,children:["Talents d'Afrique - √âdition ",edition?.nom]}),e.jsx(p,{sx:{my:3}}),e.jsxs(r,{container:!0,spacing:3,children:[e.jsxs(r,{item:!0,xs:6,children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:"R√©f√©rence:"}),e.jsx(t,{variant:"body1",fontWeight:"medium",children:n.reference})]}),e.jsxs(r,{item:!0,xs:6,children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:"Date:"}),e.jsx(t,{variant:"body1",children:y(n.created_at)})]}),e.jsxs(r,{item:!0,xs:12,children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:"Candidat:"}),e.jsx(t,{variant:"h6",children:s.nom_complet}),e.jsx(t,{variant:"body1",color:"text.secondary",children:s.categorie_nom})]}),e.jsxs(r,{item:!0,xs:12,children:[e.jsx(t,{variant:"h6",gutterBottom:!0,sx:{mt:3},children:"D√©tails du paiement"}),e.jsx(o,{sx:{p:2,bgcolor:"#f5f5f5",borderRadius:1,border:"1px solid #e0e0e0"},children:e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",children:"Nombre de votes:"})}),e.jsx(r,{item:!0,xs:6,textAlign:"right",children:e.jsx(t,{variant:"body2",children:n.votes_count})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",children:"Montant unitaire:"})}),e.jsx(r,{item:!0,xs:6,textAlign:"right",children:e.jsx(t,{variant:"body2",children:m(100)})}),e.jsx(r,{item:!0,xs:6,children:e.jsx(t,{variant:"body2",fontWeight:"medium",children:"Total:"})}),e.jsx(r,{item:!0,xs:6,textAlign:"right",children:e.jsx(t,{variant:"h6",fontWeight:"bold",children:m(n.amount)})})]})})]}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(t,{variant:"body2",color:"text.secondary",align:"center",sx:{mt:4},children:["Ce re√ßu a √©t√© g√©n√©r√© automatiquement.",e.jsx("br",{}),"Merci pour votre soutien aux talents africains !"]})})]})]})})})]})};export{ae as default};
